
def threshold_values(seq,threshold=1):
    '''
    '''
    assert isinstance(seq,list)
    temp = gather_values(seq)
    dic = {}
    l=[]
    for y in temp:
        l.append((len(temp[y]),y))
        

    l.sort(key=lambda k:(-k[0],k[1]))
    count=0
    for x in l:
        if count < threshold:
            c=0
            for z in x[1]:
                assert z=='1' or z=='0'
                if z=='1':
                    c=c+1
                else:
                    c=c-1
            if c>=0:
                dic[x[1]]=1
                count=count+1
            else:
                dic[x[1]]=0
        else:
            dic[x[1]] = 0
        
    return dic
    

seq= ['1111', '0110', '1001', '0011', '0111', '0100', '0111', '1100', '0011', '0010', '0010', '1010', '1010', '1100', '0110', '0101', '0110', '1111', '1001', '0110', '0010', '1101', '0101', '0010', '0100', '0010', '0000', '0000', '0011', '0110', '0101', '1010', '1011', '1101', '1100', '0111', '1110', '0100', '0110', '1101', '0001', '1110', '0010', '0001', '1010', '1010', '0011', '1000', '0010', '0000', '1010', '1101', '1111', '1000', '1000', '0010', '1010', '0101', '0101', '1101', '0110', '1001', '1100', '1100', '1000', '1010', '0011', '0101', '0101', '0011', '0001', '1010', '0011', '0011', '1101', '1010', '0101', '0011', '1011', '0101', '0000', '1111', '1001', '0101', '1100', '0011', '1111', '1101', '0001', '1111', '1110', '1111', '0001', '0010', '0110', '0100', '0101', '1100', '1110', '1001']
#t={'1111': [1, 1, 1, 1, 1, 1, 1], '0110': [1, 1, 1, 1, 1, 1, 1, 1], '1001': [1, 1, 1, 1, 1], '0011': [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], '0111': [1, 1, 1], '0100': [0, 0, 0, 0], '1100': [1, 1, 1, 1, 1, 1, 1], '0010': [0, 0, 0, 0, 0, 0, 0, 0, 0], '1010': [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], '0101': [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], '1101': [1, 1, 1, 1, 1, 1, 1], '0000': [0, 0, 0, 0], '1011': [1, 1], '1110': [1, 1, 1, 1], '0001': [0, 0, 0, 0, 0], '1000': [0, 0, 0, 0]}


def gather_values(x):
    '''
    '''
    assert isinstance(x, list)

    dic = {}
    for y in x:
        c = 0
        assert isinstance(y, str)
        for z in y:
            assert z == '1' or z == '0'
            if z == '1':
                c = c + 1
            else:
                c = c - 1
        if y not in dic:
            dic[y] = []

        if c >= 0:
            dic[y].append(1)
        else:
            dic[y].append(0)

    return dic
            
#print(threshold_values(seq,3))
